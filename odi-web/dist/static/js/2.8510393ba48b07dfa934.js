webpackJsonp([2],{K31e:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("mvHQ"),o=r.n(a),i=(r("b/lj"),{os:function(){var t="",e={Mac:/macintosh|mac os x/i.test(navigator.userAgent),Windows:/windows|win32/i.test(navigator.userAgent),Linux:/linux/i.test(navigator.userAgent),Android:/Android/i.test(navigator.userAgent)};return["Mac","Windows","Linux","Android"].forEach(function(r,a){1==e[r]&&(t=r)}),t}()}),n=(r("K3RZ"),{name:"login",data:function(){return{labelPosition:"right",formData:{username:"",password:"",code:"",srcCode:"",rememberMe:!1},rules:{username:[{validator:function(t,e,r){if(""==e)return r(new Error("请输入用户名"));r()},trigger:"blur"}],password:[{validator:function(t,e,r){if(""==e)return r(new Error("请输入密码"));r()},trigger:"blur"}],code:[{validator:function(t,e,r){if(""==e)return r(new Error("请输入验证码"));r()},trigger:"blur"}]}}},methods:{codeClick:function(){var t=this.GLOBAL.host+"/api/python/login?params={%22action%22:%22getCode%22}&timeStamp="+Date.now();this.$set(this.formData,"srcCode",t)},submitForm:function(){var t=this;t.$refs.formData.validate(function(e){if(!e)return console.log("error submit"),!1;i.px=screen.width+"x"+screen.height;var r={action:"SignIn",username:t.formData.username,password:t.formData.password,code:t.formData.code};t.$axiosHttp.post(t.url,r).then(function(e){if(200!=e.code)return t.$message({duration:1e3,message:e.msg}),!1;sessionStorage.setItem("username",t.formData.username),sessionStorage.setItem("tocken",e.tocken),localStorage.setItem("activeIndex","100001"),1==t.formData.rememberMe?(delete t.formData.code,delete t.formData.srcCode,localStorage.setItem("loginStatus",o()(t.formData))):localStorage.removeItem("loginStatus"),window.location.href="/"}).catch(function(t){console.log(t)})})},resetForm:function(){this.$refs.formData.resetFields()}},created:function(){this.url=this.GLOBAL.host+this.$route.path.replace(/\/page/,"/api/python");var t=this.GLOBAL.host+"/api/python/login?params={%22action%22:%22getCode%22}&timeStamp="+Date.now();if(this.$set(this.formData,"srcCode",t),localStorage.getItem("loginStatus")){var e=JSON.parse(localStorage.getItem("loginStatus"));this.$set(this.formData,"username",e.username),this.$set(this.formData,"password",e.password),this.$set(this.formData,"rememberMe",e.rememberMe)}}}),s={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"view-body clearfix"},[r("div",{staticClass:"login-bg"},[r("div",{staticClass:"login-box"},[r("h1",[t._v("DNS集中监控系统")]),t._v(" "),r("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-position":t.labelPosition,size:"medium","label-width":"60px"}},[r("div",{staticClass:"login-top-box"},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{tabindex:"1",type:"text",placeholder:"输入用户名"},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{tabindex:"2",type:"password",placeholder:"输入密码"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"验证码",prop:"code"}},[r("el-input",{staticStyle:{width:"160px"},attrs:{tabindex:"3",type:"text",placeholder:"输入验证码"},model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}}),r("img",{staticStyle:{height:"34px","margin-left":"10px"},attrs:{src:t.formData.srcCode},on:{click:t.codeClick}})],1)],1),t._v(" "),r("div",{staticClass:"login-bottom-box"},[r("el-form-item",[r("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.submitForm}},[t._v("登录")]),t._v(" "),r("el-checkbox",{attrs:{tabindex:"3"},model:{value:t.formData.rememberMe,callback:function(e){t.$set(t.formData,"rememberMe",e)},expression:"formData.rememberMe"}},[t._v("记住帐号？")])],1)],1)])],1)])])},staticRenderFns:[]};var l=r("VU/8")(n,s,!1,function(t){r("cad6")},"data-v-235e3e44",null);e.default=l.exports},K3RZ:function(t,e,r){"use strict";e.a={rules:function(t,e){var r={};return t.forEach(function(t,a){"text"==e[a]?r[t]=[{validator:function(t,e,r){if(/['|"]+/.test(e))return r(new Error("输入的文本不能包含英文单引号或双引号"));r()},trigger:"blur"}]:"textarea"==e[a]?r[t]=[{validator:function(t,e,r){if(/['|"]+/.test(e))return r(new Error("输入的文本不能包含英文单引号或双引号"));r()},trigger:"blur"}]:"int"==e[a]?r[t]=[{validator:function(t,e,r){if(!/^[1-9][0-9]*$/.test(e))return r(new Error("请输入正整数"));r()},trigger:"blur"}]:"int(6)"==e[a]?r[t]=[{validator:function(t,e,r){if(!/^[1-9][0-9]{5}$/.test(e))return r(new Error("请输入6位正整数"));r()},trigger:"blur"}]:"decimal(2)"==e[a]?r[t]=[{validator:function(t,e,r){if(!/^[1-9]*[0]?\.[0-9]{2}$/.test(e))return r(new Error("请保留2位小数"));r()},trigger:"blur"}]:"decimal(4)"==e[a]?r[t]=[{validator:function(t,e,r){if(!/^[1-9]*[0]?\.[0-9]{4}$/.test(e))return r(new Error("请保留4位小数"));r()},trigger:"blur"}]:"date(yyyy-MM-dd HH:mm:ss)"==e[a]?r[t]=[{validator:function(t,e,r){if(!/^[0-9]{4}-[0-9]{2}-[0-9]{2}[ ][0-6]{2}:[0-6]{2}:[0-6]{2}$/.test(e))return r(new Error("请输入正确格式"));r()},trigger:"blur"}]:"date(YYYY)"==e[a]?r[t]=[{validator:function(t,e,r){if(!/^[0-9]{4}$/.test(e))return r(new Error("请输入正确格式"));r()},trigger:"blur"}]:"date(YYYY-MM)"==e[a]?r[t]=[{validator:function(t,e,r){if(!/^[0-9]{4}-[0-9]{2}$/.test(e))return r(new Error("请输入正确格式"));r()},trigger:"blur"}]:"date(yyyy-MM-dd)"==e[a]?r[t]=[{validator:function(t,e,r){if(!/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(e))return r(new Error("请输入正确格式"));r()},trigger:"blur"}]:"date(HH:mm:ss)"==e[a]&&(r[t]=[{validator:function(t,e,r){if(!/^[0-6]{2}:[0-6]{2}:[0-6]{2}$/.test(e))return r(new Error("请输入正确格式"));r()},trigger:"blur"}])}),r.username=[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:function(t,e,r){if(!/[(\w)]{1,30}/.test(e))return r(new Error("用户名必须是字母数字下划线组合"));r()},trigger:"blur"}],r.password=[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(t,e,r){if(!/[(\w)]{6,30}/.test(e))return r(new Error("密码必须是字母数字下划线组合且长度>=6"));r()},trigger:"blur"}],r}}},cad6:function(t,e){},mvHQ:function(t,e,r){t.exports={default:r("qkKv"),__esModule:!0}},qkKv:function(t,e,r){var a=r("FeBl"),o=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}}});
//# sourceMappingURL=2.8510393ba48b07dfa934.js.map